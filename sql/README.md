# SQL – Pulse University Festival DB

This folder contains all schema definitions, logic scripts, queries, and outputs for the semester project.

## Contents

- **`install.sql`**: Creates the full database schema, including all tables, constraints, and relations.
- **`indexing.sql`**: Adds performance-optimized indexes to accelerate specific queries (Q1–Q15).
- **`procedures.sql`**: Defines stored procedures used for ticket updates, staff checks, and maintenance tasks.
- **`triggers.sql`**: Defines all BEFORE/AFTER INSERT/UPDATE triggers for business rule enforcement (e.g. performance constraints, staff ratios, unique EANs, ticket resale logic).
- **`views.sql`**: Predefined SQL views used to simplify complex queries (e.g. artist ratings, genre counts, yearly revenue).
- **`load.sql`**: Generated by `faker_sql.py`; contains full data population logic with verified INSERT/DELETE statements that satisfy all schema constraints and triggers.

---

## `queries/` Subfolder

Contains one file per required SQL query:

- `Q01.sql` through `Q15.sql`: Solutions to the assignment's 15 core questions
- `Q01_out.txt` through `Q15_out.txt`: Output from each query's execution using the CLI tool
- `Q0x_plan{1,2,3}_out.txt`: Especially for queries 4 and 6, two output files each for the two alternative execution plans. Those files contain, apart from the query output, explain and trace results, as needed. The third output file contains a comparisson of different join strategies for those queries.
- All queries are written in clean SQL without ORMs, JSON, or array types

---

## How to Use

1. To deploy the full schema with its constraints, run:

```bash
db137 create-db
```

2. To fill the database with the synthetic data, run:

```bash
db137 load-db
```

3. To run a specific query (e.g., Q08):

```bash
db137 q 8
```

4. To run a batch of queries (e.g., Q01 to Q06):

```bash
db137 q 1 6
```
