# Installing and Using the db137 CLI

---

## 1. Project Structure and Context

You are inside the project `DB25_137/`, where the `cli/` folder contains:

- `cli/db137.py` (main CLI command)
- `cli/users/manager.py` (MySQL user operations)
- `cli/__init__.py` (package marker)

Your root project also includes:

- `pyproject.toml` (modern packaging, no setup.py)
- `db137.egg-info/` generated by pip install
- `code/`, `sql/`, `diagrams/`, etc.

The project **does not** use a `src/` folder â€” all packages are found directly from the root.

---

## 2. Requirements

You need:

- Python 3.8 or higher
- Packages: `click`, `mysql-connector-python`

Install them:

```bash
pip3 install --user click mysql-connector-python


---

## 3. Correct pyproject.toml
At the project root (`DB25_137/`), your `pyproject.toml` must contain:

```toml
[build-system]
requires = ["setuptools>=64"]
build-backend = "setuptools.build_meta"

[project]
name = "db137"
version = "0.1"
description = "Pulse University Database Helper CLI"
readme = ""
requires-python = ">=3.8"
dependencies = [
    "click",
    "mysql-connector-python",
]

[tool.setuptools.packages.find]
where = ["."]
[project.scripts]
db137 = "cli.db137:cli"
```

This defines:
- where the code is (`cli/`)
- that a CLI tool named `db137` must be created

---

## 4. Installation of db137
From the project root:

```bash
pip uninstall db137        # (only if re-installing)
pip install --user -e .
```
`-e .` means editable mode (live code changes without reinstalling).

---

## 5. Ensure PATH Includes User Scripts
Make sure your `~/.bashrc` or `~/.zshrc` has:

```bash
export PATH="$HOME/.local/bin:$PATH"
```

Reload:

```bash
source ~/.bashrc
# or
source ~/.zshrc
```

This ensures Bash finds your `db137` installed under `~/.local/bin/db137`.

---

## 6. Running db137
Test:

```bash
which db137
```

should output something like:

```
/home/<user>/.local/bin/db137
```

Then:

```bash
db137 --help
```

should print the CLI help.

If you get `command not found`, double-check PATH and installation.

---

## 7. db137 Environment Variables
The CLI expects two environment variables to be set:

```bash
export DB_ROOT_USER=root
export DB_ROOT_PASS='your-root-password'
```

You can add them inside your `.envrc` if using `direnv`.

Reload:

```bash
direnv allow
```

This avoids having to export manually each session.

---

## 8. Cleanup Old Files
If you had an old `cli/db137.egg-info/`, delete it:

```bash
rm -r cli/db137.egg-info
```

Only the `db137.egg-info/` at root should exist.

---
